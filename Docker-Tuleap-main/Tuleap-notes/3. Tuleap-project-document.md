                                                            *CAIR*
                                        **✅Docker-Based ROS2-CI/CD Automation Project✅**
            Docker-Based Automation Stack: ROS2, Tuleap, Jenkins, Sonarqube, MySQL, Redis, Mailhog, grafana, Prometheus


.....................................................................................................................................

                                         **Basic understanding of Docker workflow**

✅ What Is Docker?
Docker is an open-source platform that helps you build, ship(share), and run applications inside containers.These containers package everything your app needs, so it runs the same anywhere—whether on a laptop, server, or cloud.

or

Docker is a containerization platform that runs applications in isolated environments called containers on a shared OS kernel.

or

Docker is an open-source platform that automates the deployment of applications within containers, enabling developers to package their software, dependencies, and runtime environment into a single, self-contained unit. It's used to streamline the development, testing, and deployment of applications by ensuring consistency across different environments and simplifying resource management


#docker
Docker was created in 2013 by Docker Inc. as a containerization platform to simplify the process of building, shipping, and running applications in isolated environments.

#moby
Moby was introduced later, in 2017, by Docker Inc. as an open-source project to provide the underlying components used to build Docker and other container platforms. Moby is a modular framework that provides the building blocks needed for container systems, but it's not a finished product like Docker.


🧩 Think of it like this:
🚗 Analogy 1: Car Manufacturing
Moby = The engine, chassis, tools, and parts used to build a car.

Docker = The finished car, ready to drive.

Docker was first (2013) as a product to run containers.

Moby came later (2017) as a framework to help developers build their own container platforms.



✅ Diagram for docker:

[ Develop  ]  -->  [ Ship  ]  -->  [ Run  ]
   (code)           (image)        (container)

--Develop: Write and test the application code.
--Ship: Package the code into a Docker image.
--Run: Deploy the image as a container for execution



✅ Visual Picture (Easy to Understand)

|-----------------------|
|      Hardware         |  ---> Example: Physical server or VM running Ubuntu
|-----------------------|
          |
|-----------------------|
|   Ubuntu (Base OS)    |  ---> Example: Ubuntu 20.04 LTS (Base OS that runs Docker)
|-----------------------|
          |
|-----------------------|
|    Docker Engine      |  ---> Example: Docker v20.10.6 (Manages the containers)
|-----------------------|
          |
-------------------------------------------
|  App Container 1      | ---> Shares Ubuntu Kernel |  ---> Example: ROS2 (Robot Operating System)
-------------------------------------------
|  App Container 2      | ---> Shares Ubuntu Kernel |  ---> Example: Jenkins (CI/CD pipeline)
-------------------------------------------
|  App Container 3      | ---> Shares Ubuntu Kernel |  ---> Example: MySQL (Database server)
-------------------------------------------


#Explanation with Examples:
Hardware:
Example: A physical server (e.g., Dell PowerEdge) or a virtual machine (VM) running on a hypervisor (e.g., VMware, VirtualBox) that is used to host everything.

Ubuntu (Base OS):
Example: Ubuntu 24.04 LTS is installed as the base OS. This is where Docker will run, and all containers will share the kernel of this OS.

Docker Engine:
Example: Docker v20.10.6 or any other stable version installed on the Ubuntu OS. It runs the containers, handles their lifecycle, and provides isolation between them.

App Container 1:
Example: ROS2 (Robot Operating System) running in a Docker container to simulate robot behaviors or control systems.

App Container 2:
Example: Jenkins running in a Docker container for CI/CD pipeline automation (building, testing, deploying software).

App Container 3:
Example: MySQL running in a Docker container to manage database services required by applications.



✅ Key Docker Concepts

| Component         | Description                                                                 |
|-------------------|-----------------------------------------------------------------------------|
| **Docker Engine** | Core runtime that builds and runs containers. Built using Moby.             |
| **Docker Daemon (`dockerd`)** | Background service that manages images, containers, networks, and volumes. |
| **Docker CLI (`docker`)**     | Command-line interface used to interact with Docker Daemon.      |
| **Docker Images** | Read-only templates used to create containers.                              |
| **Docker Containers** | Lightweight, portable, and isolated runtime environments.              |
| **Dockerfile**    | Script with instructions to build a Docker image.                          |
| **Docker Compose**| Tool to define and run multi-container applications using `docker-compose.yml`. |
| **Docker Hub**    | Cloud-based registry to store and share Docker images.                     |
| **Volumes**       | Persistent storage used by containers.                                     |
| **Networks**      | Virtual networks used for container-to-container communication.             |



🧩 Think of Docker like a Kitchen System
| Docker Component         | Analogy Example                                                                 |
|--------------------------|----------------------------------------------------------------------------------|
| **Docker Engine**        | The **whole kitchen system** — where cooking (containerization) happens.         |
| **Docker Daemon**        | The **chef** — executes commands, manages the cooking process (containers/images). |
| **Docker CLI**           | The **waiter** — takes your order (commands) and gives it to the chef (daemon).   |
| **Dockerfile**           | The **recipe** — tells how to make the dish (image).                              |
| **Docker Image**         | The **prepared ingredients set** — reusable, consistent base for any container.   |
| **Docker Container**     | The **final dish** made from the recipe (image) — running and ready to use.       |
| **Docker Hub**           | The **supermarket** — where you get your ingredients (images) or share them.      |
| **Volumes**              | The **fridge/storage** — holds ingredients/data even after cooking is done.       |
| **Networks**             | The **kitchen intercom** — lets chefs (containers) talk to each other.            |
| **Docker Compose**       | The **kitchen manager** — runs multiple dishes (containers) in order, from a plan.|




✅  Why Use Docker? (Detailed Advantages)
✅ Reason	            ✅ Detailed Explanation
Consistency	            Docker containers include your app + its dependencies → no surprises when moving from dev to production.
Portability	            Run Docker containers on any system (Windows, Linux, Mac, Cloud).
Isolation	            Each container is isolated → one app doesn’t affect another.
Lightweight	            Containers share the host OS kernel → no full OS like VMs → low resource usage.
Fast Deployment	        Start containers in seconds (VMs take minutes to boot).
Version Control	        Docker images are versioned. Roll back to an earlier version easily.
Simplified CI/CD	    Easily automate testing, building, and deploying with Docker in pipelines (Jenkins, GitLab, etc.).
Scalability	            Quickly run multiple copies (replicas) of containers → supports microservices and scaling.
Security	            Containers are isolated from the host system and other containers → better security.


#Notes
👉 All containers share the Ubuntu system's kernel (not the full system).
👉 No need to install a separate full operating system inside each container — containers are lightweight.
👉 Each container includes only the app and its dependencies (like libraries, binaries), not a full OS.
👉 Docker images are read-only templates, while containers are running instances.
👉 Docker Compose simplifies managing multi-container applications.
👉 Volumes provide persistent storage for containers.
👉 Containers are isolated, ensuring no interference between them.
👉 Docker networking enables communication between containers.
👉 Docker allows setting resource limits for CPU and memory.


##Docker image and Container
🏗️ Docker Image = House Blueprint (Static)
🏠 Docker Container = Actual House (Dynamic)


1. Docker Image = Blueprint
A Docker image is like a blueprint or template for creating containers.
Docker image = package that can be shared, stored, and used to create containers (running instances of that package).

It contains everything your application needs to run, such as the code, libraries, files, dependencies, that the container needs to run.

Think of it as a static, read-only snapshot of your application environment that can be reused and shared.


2. Docker Container = Running Instance (Isolated Environment)
A Docker container is an instance of that image in action. It's like a running version of the blueprint.

Containers are isolated environments that ensure your application runs the same way every time, no matter where the container is running.

The container is dynamic — it starts, runs, and can be stopped, modified, or destroyed. It's like an active, isolated workspace created from the image.

--Docker Image: A static template (like a blueprint) for creating a container.

--Docker Container: A dynamic, isolated instance of that template running with its own environment.


✅➤ Docker vs Virtual Machines

--Docker and Virtual Machines (VMs) are both virtualization technologies, but they differ significantly in their approach: Docker virtualizes the operating system layer, while VMs virtualize the entire hardware. 

--Docker virtualizes the operating system layer, enabling applications to run in containers on the same host OS.

--VMs virtualize the hardware layer, running full operating systems (OS) with their own kernels on top of a hypervisor.


##Basic Docker Commands
docker --version
docker info
docker images
docker pull <image_name>
docker build -t <image_name> <path_to_dockerfile>
docker ps
docker ps -a
docker run <options> <image_name>
docker stop <container_id_or_name>
docker start <container_id_or_name>
docker rm <container_id_or_name>
docker rmi <image_name>
docker run -it --name <container_name> <image_name>
docker rm -f $(docker ps -aq)
docker rmi -f $(docker images -q)
docker logs <container_id_or_name>
docker exec -it <container_id_or_name> <command>
docker network ls
docker network create <network_name>
docker volume ls
docker volume create <volume_name>
docker volume rm <volume_name>
docker save -o <path_to_save_image.tar> <image_name>
docker load -i <path_to_image.tar>





=================================================================================================================================================

                                            🐳 Moby: The Engine Behind Docker 🐳


# 🔧 Tools Required to Run Tuleap in Docker (on Ubuntu)

| Tool / Package      |                Purpose                        |              
| ------------------- | --------------------------------------------- |
| **docker.io**       | Run Docker containers (Jenkins)               |
| **docker-compose**  | Manage multi-container Docker applications    |
| **git**             | Clone repos (Moby script, Jenkins configs)    |
| **golang-go**       | Required to run `download-frozen-image-v2.sh` |
| **curl**            | Download files, interact with web APIs        |
| **lsb_release -a**  | Identify OS version                           |


✅ Moby is an open-source framework created by Docker Inc. It provides a set of building blocks — components, tools, and scripts — to build, run, and manage containers.

or
Moby is an open framework created by Docker to assemble specialized container systems without reinventing the wheel.

or
#moby
Moby was introduced later, in 2017, by Docker Inc. as an open-source project to provide the underlying components used to build Docker and other container platforms. Moby is a modular framework that provides the building blocks needed for container systems, but it's not a finished product like Docker.

eg:-🧩 Think of it like this:
If Docker is a finished car, Moby is the engine, wheels, chassis, and tools used to build that car.


##Brief: Docker Inc., Docker, and Moby

Docker Inc. is the company that originally created and maintains the Docker platform and ecosystem.
Docker = the platform/tool
Moby = the open-source engine inside Docker, providing the building blocks for container systems.


# Key Details:

-- Docker Inc. is the company that created and maintains the Docker ecosystem. 
-- Docker was launched in 2013 as a tool to build, ship, and run containers. 
-- Moby was introduced in 2017 as an open-source framework to power Docker from within. 
-- Moby = the open-source engine (building blocks) inside Docker. 
-- Docker Engine, developed by Docker, revolutionized containerization. 
-- Docker Inc. also offers Docker Desktop, Docker Hub, and Docker Extensions. 
-- The company focuses on developer tools, not low-level infrastructure. 


#Docker Engine = CLI + Daemon + containerd + runc

-- dockerd (Docker Daemon): Handles container lifecycle and manages images, volumes, networks.
-- containerd: Lightweight container runtime used by Docker to manage containers.
-- runc: Low-level tool that actually runs containers (implements the OCI runtime spec).
-- Docker CLI (Command Line Interface): Tool to interact with the Docker Daemon.


🔹 Key Points about Moby:

-- It is designed for developers who want to customize container systems. 
-- You can create your own Docker-like platforms using Moby components. 
-- It is not a product for end users — it’s a framework for building container solutions. 

📦 Docker Hub 
Docker Hub is a cloud-based container image registry service.

-- Store and distribute Docker images easily. 
-- Share images publicly (open to all) or privately (restricted access). 
-- Supports automated builds and CI/CD by connecting to Tuleap, GitHub, or GitLab. 
-- Provides official images for popular software stacks, maintained and updated regularly. 


##🔧 Steps to Use download-frozen-image-v2.sh from Moby

✅ 1. Clone the Moby Repository
https://github.com/moby/moby
git clone https://github.com/moby/moby.git
sudo apt update
sudo apt install golang-go -y  (Go programming language (go)
sudo apt install jq -y       (jq is a lightweight command-line JSON processor)

#note:-
Go because part of it is written in Go to handle complex Docker image downloads that Bash alone can't manage.
jq is a command-line tool used to read, filter, and manipulate JSON data.


✅  2. Navigate to the contrib Directory
cd moby/contrib

✅ 3. Make the Script Executable
chmod +x download-frozen-image-v2.sh
    
✅ 4. Download the Docker Image (e.g., Tuleap Community Edition)
./download-frozen-image-v2.sh ./ros/docker osrf/ros:humble-desktop
./download-frozen-image-v2.sh ./tuleap/docker tuleap/tuleap-community-edition:latest
./download-frozen-image-v2.sh ./jenkins/docker jenkins/jenkins:lts-jdk17
./download-frozen-image-v2.sh ./redis/docker library/redis:latest
./download-frozen-image-v2.sh ./mysql/docker mysql:8.0
or
docker pull mysql:8.0

ls ./tuleap/docker

#optional--images
./download-frozen-image-v2.sh ./mailhog/docker mailhog/mailhog:latest
./download-frozen-image-v2.sh ./prometheus/docker prom/prometheus:latest
./download-frozen-image-v2.sh ./grafana/docker grafana/grafana:latest
./download-frozen-image-v2.sh ./sonarqube/docker sonarqube:latest


✅ 5. Create a Tar File from the Image Files
cd ./tuleap/docker
tar -cvf tuleap-docker-image.tar repositories manifest.json 3c1656b7fad0c6915005e368f391c87900a42012475ee3c3f4f0dbf60eb29f12.json 576121cfdb956e2fd2d049e782b17cb53c83fb3c8ec13d54b83624715c1b0879/


✅ 6. Load the Image into Docker
docker load -i tuleap-docker-image.tar

✅ 7. Verify the Docker Image
docker images

#output
REPOSITORY                        TAG       IMAGE ID       CREATED        SIZE
tuleap/tuleap-community-edition   latest    3c1656b7fad0   14 hours ago   1.74GB



##Note
File/Folder                                             Description
manifest.json                                           Metadata about the Docker image (configuration, layers).
repositories                                            Information about image names and tags.
Dependencies (Folders like layer.tar, json, VERSION)    Actual image layers and metadata per layer.


# Step 1: Create a tar archive from the downloaded image components
tar -cvf tuleap-docker-image.tar manifest.json repositories <dependencies-folder-names>

# Step 2: Load the Docker image from the tar file into Docker daemon
docker load -i tuleap-docker-image.tar
docker images








......................................................................................................................................
## Another method to download the docker images 
🔧 Steps to Pull the Docker Image Directly from Docker Hub via Browser

✅ 1. Go to Docker Hub Website
Open your web browser and navigate to the Docker Hub website.

✅ 2. Search for the Tuleap Image
In the search bar at the top of the Docker Hub homepage, type tuleap/tuleap-community-edition and hit Enter.

You should see the official image for Tuleap Community Edition listed in the search results.

✅ 3. Open the Tuleap Image Page
Click on the tuleap/tuleap-community-edition repository link in the search results. This will take you to the image details page.

✅ 4. Copy the Pull Command
On the image details page, you’ll find a section called "How to Use" or "Docker Pull Command".

It will show you the command to pull the image. For example:

docker pull tuleap/tuleap-community-edition:latest

✅ 5. Pull the Image Using Docker CLI
Open a terminal on your local system where Docker is installed.

Paste and run the pull command that you copied from the Docker Hub page:

$docker pull tuleap/tuleap-community-edition:latest

✅ 6. Verify the Docker Image
docker images



==================================================================================================================================================

						###################🔧Tuleap ###################

📚 What is Tuleap?
✅Tuleap is a free, open-source platform used by teams to:

--Tuleap = "One big software that does project tracking + code management + documentation + CI/CD automation — all together."

--Plan projects (Agile, Scrum, Kanban)
--Track tasks, bugs, and issues
--Manage source code (Git, SVN)--Manage Git or SVN repositories (like GitHub)
--Collaborate (Wiki, documents, chats)
--Automate builds (integrate with Jenkins for CI/CD)--Connect Jenkins to automate testing/building
--🖥️ Open Source	You can install and control it yourself (self-hosted)


🎯 Example:
A software company uses Tuleap to:
--Plan features in a Kanban board
--Store source code in Git inside Tuleap
--Track bugs reported by users
--Write technical documents in a shared Wiki
--Automatically test new code using Jenkins connected to Tuleap

🛠 Small Real-life Example:

Imagine you are building an app.
Normally, you would need:
--Jira ➔ for tracking tasks
--GitLab ➔ for managing the app’s source code
--Confluence ➔ for sharing design documents
--Jenkins ➔ for auto-testing your app(Automate testing/building code ✅ (using Jenkins)







=======================================🚀 Tuleap Production Setup Workflow - /srv/tuleap/=========================================================
        
##Tuleap offical document process explanation

Tuleap docker installation website link
https://docs.tuleap.org/installation-guide/docker/introduction.html


Tuleap installation
Using Tuleap Docker images is a smart and efficient way to:

✅ Quickly test or evaluate Tuleap without manual installation.
✅ Run a fully preconfigured environment in minutes.
✅ Use Docker and Docker Compose to easily bring up Tuleap + its dependencies (MySQL, Redis, Mailhog).
✅ Save time during development, CI/CD automation, or training setups.



########################################## Introduction - Tuleap on Docker ##################################################-----------------1
##What for ?
Tuleap delivers two different images:

🧪 1. Tuleap Community Edition (CE) Docker Image
Docker image for quick testing with everything preconfigured. Ideal for demos, trials, and development.


🏢 2. Tuleap Enterprise Edition (EE) Docker Image
Docker image for production use, offering data persistence, easier upgrades, and long-term stability. Requires a license.


🧭Purpose						Use This Image
Testing / Quick Tryout					tuleap/tuleap-community-edition
Persistent / Real Usage					tuleap-enterprise (requires a license)




##Prerequisites

✅ 1. Docker Required
Tuleap runs inside Docker containers.

So, you must install Docker on your host/server


✅  2. Docker Compose as well.
You might want Docker Compose, which:

Uses a docker-compose.yml file to define and run all services together.

Makes it easier to manage multiple services (Tuleap + MySQL + Redis + Jenkins, etc.).


Component			Recommended Spec
CPU				8 cores (Intel Xeon / AMD Ryzen)
RAM				32 GB (to handle background processes and active users)
Storage				250 or 500 GB SSD 
OS				Ubuntu 20.04 LTS or 22.04 LTS
Docker Version			Latest Docker CE or EE


#Docker and docker-compose installation on ubuntu 20/22.04
Install using the apt repository

# Add Docker's official GPG key:
sudo apt-get update
sudo apt-get install ca-certificates curl
sudo install -m 0755 -d /etc/apt/keyrings
sudo curl -fsSL https://download.docker.com/linux/ubuntu/gpg -o /etc/apt/keyrings/docker.asc
sudo chmod a+r /etc/apt/keyrings/docker.asc

# Add the repository to Apt sources:
echo \
  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu \
  $(. /etc/os-release && echo "${UBUNTU_CODENAME:-$VERSION_CODENAME}") stable" | \
  sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
sudo apt-get update


#Install the Docker packages.
sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
sudo apt  install docker-compose


#note
Package				What it does
docker-ce			Docker Community Edition (the core Docker engine)
docker-ce-cli			Docker command-line interface (docker command)
containerd.io			The container runtime used by Docker
docker-buildx-plugin		Plugin for advanced multi-platform builds (docker buildx)
docker-compose-plugin		✅ Docker Compose as a plugin (use docker compose)


#Verify that the installation 
sudo systemctl enable docker
sudo systemctl status docker
sudo systemctl start docker
docker --version
docker-compose --version



✅ 3. The following sections assume that you are going to run the Tuleap container as the only “visible” container on the server. That means that Tuleap web container will publish it’s ports (80, 443 and 22) on hosts ports.

🚀 Tuleap as the Only Visible Container – Explained
When Tuleap is the only visible container, it means:

--Tuleap is the main service running on your server.

--It will directly expose its important ports to the host (your machine).

--No other container or application should use the same ports.

--Anyone connecting to your server on these ports will be routed directly to Tuleap.



📡 Ports Exposed by Tuleap (to Host)
Port		Used For		What Happens
80		HTTP			Users can access Tuleap via http://your-server (non-secure web access)
443		HTTPS			Users can access Tuleap via https://your-server (secure, encrypted web access)
22		SSH			Used for secure remote access and Git over SSH



##note
This setup makes Tuleap the primary interface for all incoming user connections via browser or SSH. All requests on ports 80, 443, and 22 go directly to the Tuleap container.





##📦External Dependencies(the image has two dependencies)
To run the Tuleap Docker container properly, it needs two important components:

1️⃣ Dedicated MySQL v8.0 Database
--Tuleap needs its own MySQL database (version 8.0).
--You must provide admin credentials (like root user & password) during the first run.
--After that, Tuleap will manage its own schema and data.


#note
Do not use a shared MySQL database with other applications.
Tuleap must use its own dedicated MySQL database instance. It should not be shared with any other application.
“Do not share” = Only Tuleap should use that MySQL instance, not other software or services.



2️⃣ Persistent Filesystem (Storage)
Tuleap stores:

User files

Project data

Configuration

Git repositories, etc.

✅ This data should be stored in volumes or host-mounted folders so it survives container restarts or upgrades.

#note
Persistent = Data stays safe even after container restarts or deletes.




#overview
✅ The 2 Dependencies:
Dedicated MySQL 8.0 Database
→ Tuleap needs its own MySQL database (not shared with other apps).

Persistent Filesystem
→ Tuleap needs storage that retains data even when the container is stopped or recreated.




#main key points
✅ #Difference Between Bind Mount, Volumes and docker network:

1. Bind mounts directly link files or directories on the host to specific paths inside a Docker container. They are great for development or when you want real-time access to files on your host.
--Bind mounts are great for sharing config files, certs, or scripts from your host into the container.
--Bind mounts directly link a file or directory on your host machine to a specific path inside a Docker container.
--Changes made on either the host or inside the container are immediately reflected on the other side.
--Bind mounts are ideal for development or when you want real-time access to files on your host.




✅ When to Use Bind Mounts:
--To share configuration files, SSL certificates, or scripts from the host to the container.
--When you want to edit source code or config files on the host and see those changes instantly inside the container.
--Ideal for development environments where fast iteration is needed.



#Key Features:
--🟡 Not isolated by Docker – Both the host and container can read and write to the same files or directories.

--🔄 Live syncing – Changes made on the host or inside the container are reflected immediately on the other side.

--🗂️ Flexible path mapping – You can map any file or directory from the host directly into the container.




#eg:-
You have:

app.conf and start.sh on your host machine.

--You want a container to use them directly and reflect changes immediately.

volumes:
  - jenkins_home:/var/jenkins_home                          # ✅ Docker Volume
  - /var/run/docker.sock:/var/run/docker.sock               # ✅ Bind Mount
  - /usr/bin/docker:/usr/bin/docker                         # ✅ Bind Mount
  - ./app.conf:/etc/app/app.conf                            # ✅ Bind Mount (example)
  - ./start.sh:/usr/local/bin/start.sh                      # ✅ Bind Mount (example)






2. 📦 Docker Volumes: Persistent Storage:
#What are Volumes?
--Volumes are storage locations managed by the Docker daemon. They are used to store data outside of containers, which allows the data to persist even after the container is removed or recreated.

#Persistence:
Volumes remain intact even when the container using them is stopped, removed, or recreated. This ensures that important data (e.g., databases, logs) is not lost when containers are removed or recreated.

or
Persistent Storage: Volumes are used to store data persistently. Even if the container using the volume is removed, the data remains safe in the volume.

or
Managed by Docker and typically used for more permanent storage needs. Docker handles the location of the data, and it’s stored outside the container.


#Location on the Host:
Volume data is physically stored on the host filesystem. By default, Docker stores volumes in /var/lib/docker/volumes/ on Linux systems.


#How Volumes Work:
Create a Volume:
1. Volumes can be created using Docker commands or through docker-compose.yml in case of more complex setups.
$docker volume create my_volume

2. Mount the Volume to a Container:
In order to use the data stored in the volume, you mount the volume into a container.

✅eg:-
In the example tuleap-data:/data, tuleap-data is the name of the Docker volume, and it is being mounted to the /data directory inside the container.
volumes:
  - tuleap-data:/data


#Key Points:
Mounting a Volume: The volume (tuleap-data) is mounted to the container at the /data path.

Persistence: The data stored in the tuleap-data volume will persist even if the container is stopped or removed.

Data Isolation: Data in the volume is isolated from the container, allowing it to be reused or backed up separately.


#Why Use Volumes?
--Data Protection: Since data is stored outside the container, it’s protected and persists across container recreations or deletions.

--Easier Backup/Restore: Volumes can be easily backed up, restored, or moved between different Docker hosts.

--Separation of Concerns: Volumes keep data separate from the container filesystem, which means your application container can be replaced without worrying about losing important data.
--Volumes: Managed by Docker for persistent storage, isolated from the host. Ideal for production data, databases, etc.
--Volumes provide persistent storage in Docker, storing data separately from containers.
--You need to mount the volume into a container to interact with the data.
--Even if the container is removed, the data inside my_volume is not lost. The volume can be reused by new containers as needed.



##Recap
--Volumes provide persistent storage in Docker, storing data separately from containers.

--The data in the volume survives container removal.

--You need to mount the volume into a container to interact with the data.




3. Docker Network

A Docker network allows containers to communicate with each other and with the outside world. It manages how containers are connected, isolated, or exposed on a network level.

Docker Network అనేది Docker containers ఒకదానితో ఒకటి మరియు బయటి ప్రపంచంతో కమ్యూనికేషన్ చేయడానికి ఉపయోగించే ఒక విధమైన నెట్‌వర్క్ సిస్టమ్.

#🔸 Why Docker Networking is Needed
--When working with multiple containers (e.g., Tuleap, MySQL, Redis), they need to:

--🧱 Container Isolation: By default, containers can't talk to each other or the internet.

--🔗 Communication: Networking allows containers to communicate with each other (e.g., web app ↔ database).

🧱 ఎందుకు అవసరం?
డిఫాల్ట్‌గా ప్రతి Docker కంటైనర్ ఒక దానికొకటి వేరు – కంటైనర్‌ల మధ్య నేరుగా కనెక్ట్ అవ్వలేవు.

కానీ అనేక సందర్భాలలో కంటైనర్‌లు ఒకదానితో ఒకటి మాట్లాడాలి (ఉదాహరణకు: వెబ్‌సర్వర్ ↔ డేటాబేస్).

Docker Network ద్వారా ఈ కమ్యూనికేషన్ సులభంగా అవుతుంది.



#🔹 Types of Docker Networks

| Type      | Description                                                                                                  |
| --------- | ------------------------------------------------------------------------------------------------------------ |
| `bridge`  | Default for standalone containers. Used for **internal communication** on a single host.                     |
| `host`    | Shares the host's network stack (no isolation). Useful for **performance or legacy apps**.                   |
| `none`    | No network. Used to **fully isolate** a container.                                                           |
| `overlay` | Used in **Swarm** mode to connect containers across **multiple hosts**.                                      |
| `macvlan` | Assigns a **MAC address** from your LAN to the container. Allows container to appear like a physical device. |


| Network Type | Use Case                   | Scope       | 
| ------------ | -------------------------- | ----------- | 
| Bridge       | Local container networking | Single host | 
| Host         | High-performance apps      | Single host | 
| Overlay      | Multi-host apps            | Cluster     | 
| Macvlan      | LAN integration            | Single host | 
| None         | Fully isolated workloads   | Single host | 




#🔹 Common Commands

| Action                 | Command Example                               |
| ---------------------- | --------------------------------------------- |
| List networks          | `docker network ls`                           |
| Inspect a network      | `docker network inspect bridge`               |
| Create a network       | `docker network create mynet`                 |
| Create overlay network | `docker network create -d overlay myoverlay`  |
| Remove network         | `docker network rm mynet`                     |
| Run with network       | `docker run --network=mynet nginx`            |
| Connect to network     | `docker network connect mynet mycontainer`    |
| Disconnect from net    | `docker network disconnect mynet mycontainer` |



#🔹 Example in Compose
networks:
  shared-network:
    driver: bridge



    +---------+        +--------+        +--------+
    | Tuleap  | <----> |  MySQL | <----> | Redis  |
    +---------+        +--------+        +--------+
        \__________________|__________________/
                      |
            shared-network (bridge)


✅ # networks:
networks: is a top-level key in the Docker Compose file used to define and control custom Docker networks that services (containers) can connect to.
networks: = మీరు Docker లో కంటైనర్‌లకు కమ్యూనికేషన్ కోసం వాడే virtual networkలను నిర్వచించే విధానం

--This is the top-level section in the Compose file used to define custom networks.

--Without it, Docker Compose creates a default network automatically.

--By defining it manually, you gain more control over networking.

#note:-
networks:- Without it, Docker Compose creates a default network automatically


#Why it matters:
It gives you full control over how containers talk to each other, which containers are isolated, and what kind of network driver is used (bridge, overlay, etc.).

| Feature              | Without `networks:`   | With `networks:`                    |
| -------------------- | --------------------  | ----------------------------------- |
| Control over name    | ❌ No                 | ✅ Yes                               |
| Driver selection     | ❌ Only default       | ✅ Can use `bridge`, `overlay`, etc. |
| Subnet configuration | ❌ Not possible       | ✅ Fully customizable                |
| Service isolation    | ❌ All in one network | ✅ You decide who talks to whom      |
| Multi-host support   | ❌ Not available      | ✅ With `overlay` and Swarm          |




#shared-network:

shared-network ensures Tuleap, MySQL, and Redis can talk to each other securely, reliably, and cleanly — just like a private, secure LAN within Docker.

--This is a custom network name.

--You can name it anything (frontend, backend, shared-network, tuleap-network, etc.).

--All services assigned to this network will be able to communicate with each other using service names as hostnames.


networks:
  tuleap-network:  #changing name
    driver: bridge


| Feature                 | Benefit                                                              |
| ----------------------- | -------------------------------------------------------------------- |
| **DNS-based discovery** | Containers talk by name, not IP (which may change)                   |
| **Security**            | Only allowed services can access each other                          |
| **Scalability**         | You can add more containers (e.g., Grafana, Jenkins) to same network |
| **Clarity**             | Easier to debug and manage connections in large deployments          |



#Docker Network Drivers — What They Are and Why They Matter

--Docker containers need to communicate — with each other and sometimes with the outside world (internet or other networks). To make this happen, Docker uses network drivers.


#What is a network driver?
Driver means the method or plugin Docker uses to create and manage networks.
Docker network drivers handle how containers connect and communicate with each other and the outside world. Common drivers are:


| Driver      | When It’s Best                                                                                                     |
| ----------- | ------------------------------------------------------------------------------------------------------------------ |
| **bridge**  | Best for **single-server** setups where containers run on the same host (default, simple, easy).                   |
| **host**    | Best when you need **high performance and low latency** and don’t mind no network isolation.                       |
| **overlay** | Best for **multi-server or cluster setups** (Swarm, Kubernetes) where containers need to communicate across hosts. |
| **ipvlan**  | Best for **advanced networking** where containers need their own IPs on the physical LAN for special cases.        |
| **macvlan** | Best when containers must appear as **physical devices on the LAN**, useful for legacy or specialized apps.        |


# ✅ driver: bridge---(single-server)
What is it?

--bridge is Docker’s default network driver for containers on a single host (one machine).

--It creates a virtual network bridge inside the Docker host (your server).

--Containers connected to this bridge can communicate with each other within the same host.


#How does it work?
--Think of the bridge as a virtual switch inside your server.

--When you run multiple containers on one server and attach them to the bridge network, they behave like they are on the same LAN (local network).

--Containers get private IPs and can reach each other using container names (DNS resolution inside Docker).


#Use case:
--When your application and its supporting services (database, cache, etc.) run on the same server.

--Simple, fast, and easy to manage.

--Examples: Development setups, small production setups on one server.


#Limitations:
--Does NOT work across multiple servers.

--Containers on different servers can’t communicate through a bridge network.

#eg:-
networks:
  shared-network:
    driver: bridge #(default)



#When you have multiple servers — what network to use?


✅ driver: overlay
What is it?
The overlay driver allows containers running on different Docker hosts (servers) to communicate.

It creates a virtual distributed network that spans multiple machines.

Requires Docker Swarm mode or Kubernetes orchestration.


| Network Driver | Works On         | Use Case                       | Pros                             | Cons                                     |
| -------------- | ---------------- | ------------------------------ | -------------------------------- | ---------------------------------------- |
| **bridge**     | Single host only | Simple apps on one server      | Fast, easy, default network      | Cannot connect containers across servers |
| **overlay**    | Multiple hosts   | Multi-server production setups | Enables cross-host communication | Requires Swarm/Kubernetes setup          |





..................................................................................................................................................



##################################################### 🛠️Docker images configuration🛠️ ##########################################------------2


When you use Tuleap Docker images (Community or Enterprise), you can:

✅ Use default settings — Just run the container, and Tuleap will work with basic setup.

🔒 Check image is safe — Before using the image, it's good to verify that it is the official Tuleap image and not modified by someone else.

✅ What does “verify image authenticity” mean?
It means:

--Making sure the Docker image came from Tuleap's official source.

--No one changed or hacked the image before you downloaded it.



#note
This is important for security, especially if you're using Tuleap in real or production environments.




##################################################### Environment variables ##################################################################

🧩 What does this mean?
"You can also modify the behaviour of Tuleap with environment variables."

--It means you can control how Tuleap runs by setting specific environment variables — either in a .env file or directly in your docker-compose.yml.


--The .env file contains environment variables in KEY=value format. Docker Compose automatically reads this file and injects those values into your container.


✅ What does KEY=value mean?
This is the format used for environment variables. It's a way of storing a setting (value) with a name (key).
📌 Breakdown:
KEY → the name of the variable (what it controls)

value → the data you want to assign to it

#eg:-(.env)
TULEAP_FQDN=tuleap.isrd.cair.drdo

--TULEAP_FQDN is the key (name of the variable)
--tuleap.isrd.cair.drdo is the value (the setting)



########################################################### General ##################################################################

🏷️TULEAP_FQDN: the Tuleap server name (without protocol).
--TULEAP_FQDN stands for Tuleap Fully Qualified Domain Name
--It tells the Tuleap container what domain name or hostname it should consider as its official web address


#note
tuleap-------------Hostname – this identifies the specific machine or service (in your case, the Tuleap server)
isrd.cair.drdo-----Domain name – this is your organizational domain (maybe internal or intranet domain)

🚫 Do NOT include http:// or https://


##eg ✅ Example:(.env)
TULEAP_FQDN=tuleap.isrd.cair.drdo




############################################################ Database ####################################################################

✅ Why a Database is Needed
Tuleap is a full-featured project management and DevOps platform. It needs to store:

1.Project details

2.User accounts and permissions

3.Work items (tasks, bugs, requirements)

4.Configuration settings

5.Wiki, documents, and more

All this structured data is stored in a MySQL 8.0 database.



#steps
1. TULEAP_SYS_DBHOST: database server name--(Tuleap System Database Host)

--This tells the Tuleap container where to find the MySQL database server
--🔹 db
--This is the hostname or service name of the MySQL container, as defined in your docker-compose.yml.
--Tuleap should connect to the MySQL server that is running as the db container (or service) in this Docker network

#Example:
services:
  db:
    image: mysql:8.0

--The service name is db, so inside Docker’s internal network, Tuleap can connect to MySQL using:

🧠host: db
--port: 3306 (default)


##note
--custom service names you can safely use for your MySQL container in docker-compose.yml
🔹 Sample MySQL Service Names:
db
mysql
tuleap-db
mysqldb
project-mysql

✅ Example Usage:
services:
  db:   # 👈 This is the service name (hostname inside Docker network)
    image: mysql:8.0
    environment:
      - MYSQL_ROOT_PASSWORD=${MYSQL_ROOT_PASSWORD}



##eg ✅ (.env):
TULEAP_SYS_DBHOST=db  # This must match the name of the service in the docker-compose.yml file



✅ Summary Table


| Variable                        | Purpose                       | Required? | Default |
| ------------------------------- | ----------------------------- | --------- | ------- |
| 'TULEAP_FQDN'			  | Tuleap server name		  | ✅	       | --
| `TULEAP_SYS_DBHOST`             | Database server address       | ✅         | —       |
| `DB_ADMIN_USER`                 | DB admin username             | ✅         | —       |
| `DB_ADMIN_PASSWORD`             | DB admin password             | ✅         | —       |
| `TULEAP_SYS_DBPASSWD`           | Tuleap DB user password       | ✅         | —       |
| `TULEAP_SYS_DBPORT`             | DB port (if not 3306)         | ❌         | `3306`  |
| `TULEAP_SYS_ENABLESSL`          | Enable SSL to DB              | ❌         | `0`     |
| `TULEAP_SYS_DB_SSL_VERIFY_CERT` | Verify SSL certificate        | ❌         | `0`     |
| `TULEAP_SYS_DB_SSL_CA`          | Path to custom CA certificate | ❌         | —       |




2. DB_ADMIN_USER: admin user (root or equivalent).

If you leave it as the default root user, then:

--The admin user is root
--The password for that root user is the value of MYSQL_ROOT_PASSWORD

#eg:-(.env)
MYSQL_ROOT_PASSWORD="YourRootPasswordHere"
--Don’t set DB_ADMIN_USER or DB_ADMIN_PASSWORD — Tuleap will connect as root using that password.



#If you want better security and use a separate admin user for Tuleap (recommended):
Only if you want Tuleap to connect with a different admin user (not root), then add:

| Goal                    | What to set in `.env`                                       |
| ----------------------- | ----------------------------------------------------------- |
| Use root user (default) | `MYSQL_ROOT_PASSWORD` only                                  |
| Use custom admin user   | `MYSQL_ROOT_PASSWORD`, `DB_ADMIN_USER`, `DB_ADMIN_PASSWORD` |


#What you should do in .env:

MYSQL_ROOT_PASSWORD="RootPassword123"       # Always required
DB_ADMIN_USER="newadminuser"                 # Your new admin user
DB_ADMIN_PASSWORD="NewAdminPassword456"     # Password for the new admin user



##eg ✅ (.env)
MYSQL_ROOT_PASSWORD="YourRootPasswordHere"




3. TULEAP_SYS_DBPASSWD(Tuleap system database password)
--TULEAP_SYS_DBPASSWD: application user (typically tuleapadm) password.

✅ ఉపయోగం:
DB_ADMIN_USER/DB_ADMIN_PASSWORD వేరియబుల్స్ Tuleap install అయ్యే సమయంలో మాత్రమే ఉపయోగపడతాయి.

కానీ TULEAP_SYS_DBPASSWD Tuleap ప్రతి సారి రన్నవుతూ డేటాబేస్‌కు కనెక్ట్ అయ్యేటప్పుడు ఉపయోగపడుతుంది.

#🔑 What is tuleapadm?
tuleapadm is the default database user that the Tuleap application uses to connect to the MySQL database.


#✅ Final Summary


| When?                   | User used        | Password Source                              |
| ----------------------- | ---------------- | -------------------------------------------- |
| Setup/Install           | `root` or custom | `MYSQL_ROOT_PASSWORD` or `DB_ADMIN_PASSWORD` |
| After install (runtime) | `tuleapadm`      | `TULEAP_SYS_DBPASSWD`                        |




#note:-(.env)
✅ tuleapadm is the default database user created and used internally by Tuleap

MYSQL_ROOT_PASSWORD="RootPass123"              # Needed for root(not custom)
TULEAP_SYS_DBPASSWD="TuleapAppUserPass456"     # Used by tuleapadm





4. TULEAP_SYS_DBPORT:(default)-3306

--This environment variable tells Tuleap which port to use to connect to the MySQL database.
#📌 Default Behavior:
--Default MySQL port = 3306
--If your MySQL container or server runs on port 3306, you do NOT need to set TULEAP_SYS_DBPORT.


🔄 When Should You Set It?
--You should define TULEAP_SYS_DBPORT only if:

--Your MySQL database is running on a custom/non-default port, e.g., 3307, 4406, etc.


#✅ Example:
TULEAP_SYS_DBPORT=3307


| Condition                       | Action                    	      |
| ------------------------------- | --------------------------------- |
| DB runs on port `3306`          | ❌ No need to set this(.env)      |
| DB runs on a **different port** | ✅ Set `TULEAP_SYS_DBPORT`        |




5. 🔐 TULEAP_SYS_ENABLESSL---(TULEAP_SYS_ENABLESSL=0)

TULEAP_SYS_ENABLESSL is an environment variable used in Tuleap deployments to control whether the connection between Tuleap and its database (e.g., MySQL or PostgreSQL) is encrypted using SSL/TLS.


| Value           | Meaning                                                                                                   |
| --------------- | --------------------------------------------------------------------------------------------------------- |
| `0` *(default)* | SSL is **disabled**. Traffic between Tuleap and the database is unencrypted.                              |
| `1`             | SSL is **enabled**. Tuleap will attempt to establish a **secure (encrypted)** connection to the database. |


🟢 If you do not define TULEAP_SYS_ENABLESSL in your .env file (or Docker environment), Tuleap will automatically assume it’s set to 0.


TULEAP_SYS_ENABLESSL
Enables SSL encryption for traffic between Tuleap and its database.

0 = disabled (default)

1 = enabled (encrypts data in transit)




6. TULEAP_SYS_DB_SSL_VERIFY_CERT

Enables verification of the database’s SSL certificate when SSL is enabled.

0 = disabled (default, no cert check)

1 = enabled (checks cert validity and trust)


#note
Enable SSL first (TULEAP_SYS_ENABLESSL=1), then enable cert verification for full secure connection (TULEAP_SYS_DB_SSL_VERIFY_CERT=1).



7. TULEAP_SYS_DB_SSL_CA
This allows Tuleap to trust a private or self-signed CA instead of relying only on public CAs.

#Example:
TULEAP_SYS_DB_SSL_CA=/etc/ssl/certs/my_custom_ca.pem



#Step-by-Step Process to Secure Tuleap Database Connection with SSL----(5,6,7)
1. Enable SSL encryption
TULEAP_SYS_ENABLESSL=1
(Encrypts data between Tuleap and DB)

2. Enable certificate verification
TULEAP_SYS_DB_SSL_VERIFY_CERT=1
(Checks DB SSL certificate is valid/trusted)

3. Provide custom CA file path
TULEAP_SYS_DB_SSL_CA=/path/to/your/ca.pem
(Used to verify self-signed/private CA certs)

4. Mount CA file inside container
(Make sure CA file is accessible at the above path)

5. Configure DB server SSL with matching certs

6. Restart Tuleap container to apply

7. Test secure connection




###################################################### Site administration ##################################################################

1. SITE_ADMINISTRATOR_PASSWORD
--Purpose: Sets the password for the Tuleap admin user (the main site administrator).

--Use: This password allows you to log into Tuleap with full admin privileges to manage the site, users, projects, and system settings.

--Important: Choose a strong, secure password to protect your Tuleap instance.


#eg:-(.env)
SITE_ADMINISTRATOR_PASSWORD="AdminPassword789"



2. TULEAP_SYS_EMAIL_ADMIN

--Purpose: Defines the email address where all system-generated emails will be sent.

#Use:

--Receives alerts, notifications, and system reports from Tuleap.

--Used for critical communications like password resets, system errors, or updates.

--Important: Use an email account that is actively monitored by your administrators or support team.


#note
Always set TULEAP_SYS_EMAIL_ADMIN to a valid admin email in your .env for proper system monitoring.

| **TULEAP_SYS_EMAIL_ADMIN** | Tuleap నుండి వచ్చే అన్ని system emails (notifications, errors) ఈ మెయిల్ అడ్రస్‌కి పంపబడతాయి.|`admin@yourcompany.com` |


| Email                                                                       | Meaning                   | Use? |
| --------------------------------------------------------------------------- | ------------------------- | ---- |
| [codendi-admin@tuleap.example.com](mailto:codendi-admin@tuleap.example.com) | Default placeholder email | No   |
| [tuleap-admin@isrd.cair.drdo.com](mailto:tuleap-admin@isrd.cair.drdo.com)   | Your real admin email     | Yes  |



#How it works:
--Tuleap will try to send system emails (alerts, notifications) to that email address.

--To actually deliver emails, Tuleap needs access to a working SMTP server that can send mail to external addresses.



#What you need for email to work properly:
SMTP Server Setup:
Configure Tuleap (or your Docker environment) with SMTP server details (host, port, user, password).

Network Access:
Ensure Tuleap container can connect to that SMTP server.

Valid Email Address:
The address tuleap-admin@isrd.cair.drdo.com should be monitored by your team


#If no SMTP configured or no internet:
Emails will stay in Tuleap but won’t be delivered.

You won’t get real-time alerts or system notifications by email.



✅ Option 1: Use MailHog (Best for Dev/Test)
✅ Option 2: Use Postfix (If you want actual email delivery inside your LAN, you can install and configure Postfix)



#eg:-✅ (.env)
SITE_ADMINISTRATOR_PASSWORD="AdminPassword789"
TULEAP_SYS_EMAIL_ADMIN=tuleap-admin@isrd.cair.drdo.com



########################################################### Redis #############################################################################
					
					    Redis in Your Docker Setup (Tuleap + MySQL + Redis)

#Diagram
[Browser] 
    ↓
[Tuleap Application]
    ↓           ↘
[MySQL]      [Redis]
  |             |
Persistent    Fast
  Data       Temporary Cache
          


User → Tuleap → "Get tracker data" → REDIS (checks cache first) → Instantly returns if found
        ˅  
        (If NOT in Redis) → MySQL → Saves copy to Redis for next time


#✅ Explanation:
--Browser: User interacts with Tuleap through the web interface.

--Tuleap Application: Core logic that connects to both MySQL and Redis.

--MySQL: Stores permanent data like users, projects, and tasks.

--Redis: Caches frequently used data like login sessions and tracker previews for speed.    
      
          
#Key Difference
| Feature     | MySQL                          | Redis                          |
|-------------|--------------------------------|--------------------------------|
| Storage     | Permanent (disk-based)         | Temporary (in-memory/RAM)      |
| Durability  | High (data persists on disk)   | Low (data may be lost on reboot unless configured) |
| Speed       | Slower (I/O bound)             | Very Fast (memory access)      |
| Data Format | Structured (tables, rows)      | Key-Value (flexible structures)|
| Use Cases   | User accounts, Git repos, reports | Sessions, caches, real-time trackers |
| Persistence | ACID-compliant, reliable       | Optional (AOF, RDB modes)      |
| Access Type | SQL queries (relational)       | Simple commands (NoSQL)        |
| Scalability | Vertical scaling               | Horizontal & vertical scaling  |
       
          
#Redis          
Redis is an open-source, in-memory data structure store used as a database,(— అంటే RAM లో నిల్వ ఉంటుంది. చాలా వేగంగా పనిచేస్తుంది.) cache, message broker and streaming engine. It's known for its speed and efficiency because it stores data in RAM, offering low-latency access. Redis is a key-value store, meaning data is stored as key-value pairs. 
--Redis is an in-memory key-value store. It’s extremely fast because it stores data in RAM.
--Redis is a type of database that's commonly referred to as No SQL or non-relational 

Redis = Tuleap's "Fast Memory"

#Note: 
--Redis is lightweight and just works in the background. No maintenance needed! 🚀
--MySQL = storage, Redis = speed. Together they make Tuleap fast and reliable! 🚀



#Redis in Tuleap (Docker Setup)--(Remote Dictionary Server)
📌 What is Redis?

--Redis is an in-memory data store.

--Used for fast caching, temporary storage, and real-time communication.

--Runs as a separate Docker container in your Tuleap setup.

--Cache means temporary storage that stores frequently used data so it can be accessed faster next time.


#⚙️ How Redis Works with Tuleap & MySQL

| Component  | Role                                                                      |
| ---------- | ----------------------------------------------------------------------    |
| **Tuleap** | Main application (UI, logic, user interaction)                            |
| **MySQL**  | Stores **permanent data**: users, projects, tasks                         |
| **Redis**  | Stores **temporary, fast-access data**: PHP sessions, cached results, etc.|


🧠 One-Line

#with redis
Redis makes Tuleap faster, smoother, and lighter by handling temporary, fast-access data separately from MySQL.

Redis Tuleap‌ను వేగంగా, స్మూత్‌గా, తేలికగా మార్చుతుంది, ఎందుకంటే ఇది తాత్కాలికమైన వేగంగా యాక్సెస్ చేయగల డేటాను MySQL నుండి విడిగా హ్యాండిల్ చేస్తుంది.

#without redis
Without Redis, Tuleap becomes slower and puts more pressure on the database, causing delays and a less smooth user experience.



#🔍 what happens behind the scenes with Tuleap, MySQL, and Redis running together in Docker 

1️⃣ User Interaction
You open Tuleap in your browser and perform actions like:

Logging in

Opening projects

Creating or editing tasks

2. Tuleap talks to two helpers:
--MySQL — This is like a big, slow filing cabinet where all the important permanent information is kept (users, projects, tasks).

--Redis — This is like a small, super-fast notebook that holds temporary info (like who is logged in, what you just looked at).


3️⃣ What Happens When You Perform an Action
Tuleap first checks Redis:
"Is the data already cached?"

✅ If yes → Data is returned instantly (very fast)

❌ If no → Tuleap queries MySQL (slower)

4️⃣ Redis Caching Boosts Performance
Redis holds:

Active session tokens

Recently accessed project/tracker info

--This enables Tuleap to:

Load pages faster

Avoid repetitive database queries


5️⃣ Result: Faster and Smarter Tuleap
By using Redis as a high-speed cache and MySQL as reliable storage, Tuleap:

⚡ Improves performance and responsiveness

💾 Ensures data safety and persistence




#How Different Containers Talk in Docker (Simple Explanation)
--Containers are like separate tiny computers running on the same machine.
--To communicate, they use a network inside Docker — like a private chatroom just for these containers.
--Each container has a name or address (like mysql or redis).
--Tuleap container sends requests to MySQL or Redis by using these names over the Docker network.

eg:-
When Tuleap needs to check your login session, it sends a message to redis:6379 (the Redis container’s address and port).
When Tuleap needs to get project info, it sends a query to mysql:3306 (MySQL’s address and port).



#🛠️ How to Check and Verify Redis Is Working Behind the Scenes
# Connect to Redis container

#Commands
docker exec -it tuleap_redis redis-cli

#🧹 2. (Optional) Clear All Redis Data
docker exec tuleap_redis redis-cli FLUSHALL

👀 3. Monitor Live Redis Activity
docker exec -it tuleap_redis redis-cli
MONITOR

You'll see real-time cache requests like:

#eg:-
GET tuleap:user:session:1234
SETEX tuleap:tracker:5678 3600 "cached_data"


#📊 4. Check Redis Cache Hit/Miss Stats

docker exec tuleap_redis redis-cli info stats | grep -E "(hits|misses)"

#eg:-
keyspace_hits:150
keyspace_misses:20


✅ 5. Test Redis Functionality (Basic Commands)
docker exec -it tuleap_redis redis-cli
PING                  # Should return PONG
SET testkey "hello"
GET testkey
KEYS *
DEL testkey
EXIT

🔎 6. Inspect Tuleap-Specific Cached Data
docker exec tuleap_redis redis-cli KEYS "tuleap:*"

📂 7. Compare with MySQL for Persistent Data
docker exec -it tuleap_db mysql -u root -p -e "SHOW TABLES"

✅ Tip:
Redis = fast, temporary (volatile) cache
MySQL = permanent, structured data



#🛒 Example: Online Shopping Website (like Amazon)----1
When you log in, add items to your cart, and browse products:


#Without Redis:
Every time you click something, the site fetches data from the main database (slow, heavy load).

#With Redis:
Redis stores your cart and session in memory, so:

Your cart loads instantly.

Your login session is fast.

Product recommendations are shown quickly.



#🔧 Docker + Tuleap + MySQL + Redis: Real-Time Example-----2
Imagine you're using Tuleap for project management in your company:

#🧑‍💻 Scenario:
A user logs into Tuleap and opens a project dashboard.

📦 What happens inside Docker:
1. Tuleap (App Container)

Handles login, UI, and business logic.

2. MySQL (Database Container)

Stores all user accounts, project data, tasks, etc.

3. Redis (Cache Container)

Cache means temporary storage that stores frequently used data so it can be accessed faster next time.

--When you open a website, the browser stores some files (like images, CSS) in cache.

--So next time you visit, it loads quickly without downloading everything again.

🔁 Example (Real Life)

Stores:

Login session (so user doesn't log in every time)

Recent activity (for fast dashboard loading)

Background task queues or notification status

#🚀 Result:
Fast loading interface ✅

Less load on MySQL ✅

Smooth user experience ✅


క్యాష్ అంటే తాత్కాలిక నిల్వ. తరచుగా ఉపయోగించే డేటాను తాత్కాలికంగా స్టోర్ చేసి, మళ్లీ వేగంగా యాక్సెస్ చేయడానికి ఉపయోగిస్తారు.


##eg :- ✅ (.env)
# Tell Tuleap to use Redis for PHP sessions
TULEAP_FPM_SESSION_MODE=redis

# Redis server hostname (usually container name in Docker network)
TULEAP_REDIS_SERVER=redis

# Redis port (default 6379)
TULEAP_REDIS_PORT=6379

# Redis password if set, leave blank if none
TULEAP_REDIS_PASSWORD=RedisSecurePassword321

# Use TLS encryption for Redis connection? 1 = yes, 0 or blank = no
TULEAP_REDIS_USE_TLS=0




########################################################## E-MAIL ############################################################################

#✅ What is Postfix?
Postfix is a free, open-source mail transfer agent (MTA) used for routing and delivering emails. The utility uses the Simple Mail Transfer Protocol (SMTP) to transfer emails between servers. The tool is a fast, secure, and light email service solution for Linux servers.

-- Install Postfix on the host machine.

--Postfix is the default mail transport agent. Tuleap interacts with Postfix to handle incoming and outgoing emails

--Postfix does not have a built-in GUI. It’s a command-line mail server

--It works without internet (in LAN) or with internet (if configured).

--When you install Tuleap (especially on a typical Linux server or in its official Docker image), Postfix is pre-configured or expected as the default mail service.

--Postfix configuration files like /etc/postfix/main.cf and /etc/aliases control how mail is handled.

--Tuleap automatically manages some alias settings (in /etc/aliases.codendi), so you should not edit that file manually.

--This setup runs Postfix locally on your host so Tuleap’s sendmail interface can hand off outgoing mails to it



✅ What is sendmail?
sendmail is not a separate mail server here, it's a command-line interface (CLI) tool that hands email messages to Postfix (or another MTA).

--It provides a standard way for apps (like Tuleap or cron jobs) to send email.

--Even though there is an old mail server called “Sendmail,” in this context, sendmail refers only to the interface used to pass messages to Postfix.

--Tuleap uses the sendmail interface to pass messages to Postfix.



✅ #mailq
mailq is a command-line tool you run on your host machine where Postfix is installed. It shows the mail queue — emails that Postfix has accepted but not yet delivered.

--Open terminal on your host machine (the same machine running Postfix).
--Use mailq or monitoring tools to inspect Postfix mail queue.

$ mailq  (CLI)



#How to install Postfix on Ubuntu (host machine)?
sudo apt update
sudo apt update
sudo apt install postfix mailutils
sudo dpkg-reconfigure postfix
--Set your system mail name (e.g., tuleap.isrd.cair.drdo or your domain).
--ls -l /etc/postfix/main.cf
--sudo nano /etc/postfix/main.cf
myhostname = tuleap.isrd.cair.drdo
myorigin = /etc/mailname
mydestination = $myhostname, localhost.$mydomain, localhost, $mydomain
relayhost =
mynetworks = 127.0.0.0/8
inet_interfaces = all
inet_protocols = ipv4

#Enable and start the postfix service:

sudo systemctl start postfix
sudo systemctl enable postfix
sudo systemctl reload postfix
sudo systemctl status postfix



##Recap
Tuleap uses the sendmail interface to hand off outgoing emails to the locally installed Postfix mail transfer agent, which then routes and delivers the emails; you can monitor the status of queued emails waiting to be sent using the mailq command on the host machine.




Site administration:

#TULEAP_SYS_EMAIL_ADMIN:(.env)
Defines the From email address for system-generated Tuleap emails (notifications, password resets, system errors).


Example:

TULEAP_SYS_EMAIL_ADMIN="tuleap-admin@isrd.cair.drdo.com"

#note:-This is the sender address inside Tuleap but does NOT change the admin user login email (codendi-admin@...), which must be changed manually in the Tuleap web UI and confirmed by email.


| Purpose              | Example                               | Notes                                           |
| -------------------- | ------------------------------------- | ----------------------------------------------- |
| System emails sender | `tuleap-admin@isrd.cair.drdo.com`     | Used as sender for system notifications         |
| Admin user email     | `codendi-admin@tuleap.isrd.cair.drdo` | For login and notifications; set manually in UI |



#Email transport-TULEAP_EMAIL_TRANSPORT:(.env)

--Defines how Tuleap sends emails.

--Default is sendmail → Tuleap uses the local sendmail binary (interface) to pass emails to the mail server (Postfix).

--Postfix (or another MTA) runs on the host machine to handle actual mail delivery.

--Typical setup: Tuleap container calls /usr/sbin/sendmail → Postfix on host sends email ou


#On the Host Machine (Postfix)

--Postfix must be installed and running on the host machine (outside Docker).
--Properly configure /etc/postfix/main.cf with your domain, relayhost (if any), and other required settings.
--Start and enable Postfix service:
sudo systemctl start postfix  
sudo systemctl enable postfix  
sudo systemctl status postfix




# Environment file example (.env) for local sendmail/Postfix setup

# 📧 Admin email – All system emails sent from this address
TULEAP_SYS_EMAIL_ADMIN="tuleap-admin@isrd.cair.drdo.com"

# 📤 Email sending method – Use system's sendmail (Postfix, Exim, etc.)
TULEAP_EMAIL_TRANSPORT="sendmail"

# 📨 No relay host needed when using local sendmail
# TULEAP_EMAIL_RELAYHOST is not required here or left empty


Note: This uses your system’s local Postfix to send emails via sendmail interface.




#Email relay host (TULEAP_EMAIL_RELAYHOST)
--Used only if you want Tuleap to send emails through an external SMTP server instead of local Postfix/sendmail.

--Leave empty if using local mail service.



#Choosing between Sendmail (Postfix) and SMTP

| Setup Type           | When to Use                            | Pros                           |
| -------------------- | -------------------------------------- | ------------------------------ |
| `sendmail` (Postfix) | Internal or offline LAN systems        | Simple, no internet needed     |
| `smtp`               | External email relay (Gmail, Org SMTP) | Better deliverability, logging |




#info
✅ 1. TULEAP_SYS_EMAIL_ADMIN
అర్థం: Tuleap నుండి వచ్చే అన్ని system emails (notifications, errors) ఈ మెయిల్ అడ్రస్‌కి పంపబడతాయి.(👉 Tuleap system messages పంపే main user email address.)

ఉదాహరణ: tuleap-admin@isrd.cair.drdo.com

✅ 2. TULEAP_EMAIL_TRANSPORT
అర్థం: Tuleap మెయిల్స్ ఎలా పంపాలో చెప్పే పద్ధతి. Default‌గా sendmail ఉంటుంది. మీరు smtp కూడా పెట్టొచ్చు.(👉 Tuleap uses this mail tool or method (like sendmail or smtp) to send emails.)

ఉదాహరణ: sendmail లేదా smtp

✅ 3. TULEAP_EMAIL_RELAYHOST
అర్థం: మీరు smtp transport ఎంచుకుంటే, Tuleap మెయిల్స్ పంపే SMTP సర్వర్ అడ్రస్ ఇది.

ఉదాహరణ: smtp.mailserver.com



######################################################### Passwords ########################################################################


1. Passwords (for services like Redis, MySQL, etc.) should be at least 20 characters long, using only letters (a–z, A–Z) and numbers (0–9).

2. These passwords are set only once when you first run the system or container.

3. After the initial setup, passwords are not automatically changed or updated by the system.



💬️✅#.env file--------(final-one)

# Fully Qualified Domain Name (FQDN) of your Tuleap instance
TULEAP_FQDN="tuleap.isrd.cair.drdo"

# Hostname of the MySQL container (usually the container name)
TULEAP_SYS_DBHOST="db"

# Password for MySQL root user. Used during database initialization.
MYSQL_ROOT_PASSWORD="YourRootPasswordHere"

# Tuleap application user database password
TULEAP_SYS_DBPASSWD="TuleapAppUserPass456"

# Default admin password for Tuleap web UI login (user: codendi-admin).
SITE_ADMINISTRATOR_PASSWORD="AdminPassword789"

# Email address used by Tuleap to send system emails(The "From" email address used for system notifications (e.g., password reset).)
TULEAP_SYS_EMAIL_ADMIN="tuleap-admin@isrd.cair.drdo.com"

# How Tuleap sends emails: sendmail (for Postfix on host) or smtp (for Gmail, etc).
TULEAP_EMAIL_TRANSPORT="sendmail"


#✅ These Redis-related variables are optional but are recommended in a production setup for improved performance, scalability, and session management reliability.

# Use Redis for storing PHP sessions (options: "redis" or leave blank for default file-based sessions)
TULEAP_FPM_SESSION_MODE="redis"

# Hostname of the Redis container. Usually redis
TULEAP_REDIS_SERVER="redis"

# Redis port (default is 6379)--Port Redis listens on.
TULEAP_REDIS_PORT="6379"

# Password to connect to Redis (if you set one).
TULEAP_REDIS_PASSWORD="RedisSecurePassword321"

# Use TLS for Redis? (1 = yes, 0 or leave blank = no)
TULEAP_REDIS_USE_TLS="0"



## 💬️Important Note  
Passwords can be changed by editing the `.env` and `docker-compose.yml` files (for Redis/MySQL), then restarting Docker using `docker-compose down` and `docker-compose up -d`.






########################################################### TLS Certificates ##################################################################


🔐 TLS Certificates in Tuleap Containers------1
📌 Default Behavior:-
--Tuleap generates a self-signed certificate during container startup.
--It only communicates over HTTPS — not HTTP.

#note:-
Self-signed certificates are not trusted by browsers or end users (they will show warnings).



✅ Options for Using a Valid (Trusted) Certificate----2


You need a valid TLS/SSL certificate to provide secure HTTPS connections without browser warnings. Here are your options:

1. Delegate Certificate Management to Your Ingress Controller (Kubernetes)
If you're using Kubernetes, let your Ingress controller (like NGINX Ingress, Traefik, etc.) handle TLS.

The ingress will:

Terminate TLS (i.e., handle HTTPS)

Forward HTTP to the Tuleap container (which still uses HTTPS internally)


2. Use a Reverse Proxy in Front of Tuleap
Set up an NGINX or Apache reverse proxy in front of the Tuleap container.

The reverse proxy will:

Handle TLS certificates

Communicate with end users via HTTPS

Optionally use HTTP or HTTPS to connect with Tuleap internally


3. Replace Tuleap's Self-Signed Certificate Manually(main)
If you don’t want to use a reverse proxy or Kubernetes, you can:

Replace the default self-signed certificate generated by Tuleap with your own trusted certificate.

✅ Required File Paths (inside the container):

Private key: /data/etc/pki/tls/private/localhost.key.pem

Certificate: /data/etc/pki/tls/certs/localhost.cert.pem

💡 These must be present when the container starts. You can mount them using Docker volumes or bake them into a custom image.




#Recap

| Option                   | TLS Termination | Complexity | Recommended For                      |
| ------------------------ | --------------- | ---------- | ------------------------------------ |
| Self-signed (default)    | Tuleap          | Low        | Internal testing, not for production |
| Custom cert in container | Tuleap          | Medium     | Simple setups without proxy          |
| Reverse proxy            | Proxy           | Medium     | Standard production environments     |
| Ingress (Kubernetes)     | Ingress         | High       | Kubernetes-based deployments         |





######################################################### Certification Authority #############################################################

🔐 Tuleap Custom CA Support
Use case: When Tuleap must connect to services (Jenkins, GitLab, etc.) over HTTPS with non-public/self-signed certificates.

Problem: Default CA bundle won’t trust your internal certs.

Solution: Mount your custom CA certificate to:
/extra_ca.pem




################################################ Backup/Restore/Backup for Docker/Compose Deployment ####################################


# https://docs.tuleap.org/administration-guide/system-administration/backup.html#backup

✅ STEP-BY-STEP: BACKUP & UPGRADE TULEAP (Docker Community Edition)


🔹 1. Confirm Current Running Container
$ docker ps
#Identify the Tuleap container ID or name (e.g., tuleap_community_1).


🔹 2. Backup Tuleap
a) Backup Volumes

#Run these on the host machine (not inside the container):
$ cp -r /var/lib/docker/volumes/tuleap-setup_db-data/_data /backup/tuleap_db
$ cp -r /var/lib/docker/volumes/tuleap-setup_tuleap-data/_data /backup/tuleap_data

🔸 tuleap-setup_db-data: Stores the MySQL database.
🔸 tuleap-setup_tuleap-data: Stores Tuleap config, files, logs, etc.


b) Backup MySQL Database (optional redundancy)

docker exec -it <container_id> /usr/bin/mysqldump -u root -p tuleap > /backup/tuleap_backup.sql

#Enter the MySQL root password when prompted.


🔹 3. Stop & Remove Existing Containers

$ docker stop <container_id>
$ docker rm <container_id>
$ docker rmi <image_id>

#(You can also run docker-compose down if you're using Docker Compose.)


🔹 4. Pull New Tuleap Image (Online or Offline)


✅ If you have internet access:
docker pull tuleap/tuleap-community-edition:latest


✅ If you are offline, first pull on a machine with internet:
$ docker pull tuleap/tuleap-community-edition:latest
$ docker save tuleap/tuleap-community-edition:latest -o tuleap_latest.tar
$ docker load -i tuleap_latest.tar
$ docker images


🔹 5. Update docker-compose.yml (if needed)
#Make sure the image tag points to the latest version:

image: tuleap/tuleap-community-edition:latest


🔹 6. Recreate Tuleap Containers
$ docker-compose up -d

✅ This does not delete volumes, so your data (DB, config, attachments, etc.) will remain intact and be reused.


🔹 7. Verify Upgrade
$ docker exec -it <new_container_id_or_name> tuleap --version



⚠️ Notes
-- Volumes are preserved by Docker Compose unless you run docker volume rm.

-- To be safe, always do manual volume backup before an upgrade.

-- docker-compose down stops and removes containers and networks but keeps volumes intact.

-- docker-compose up -d recreates containers with the latest images and re-attaches existing volumes, preserving your data.




#################################################### Verify the image authenticity ##################################################----------3

💬️Verify the Image Authenticity for Tuleap Docker Images


#Why verify?
To make sure the Tuleap Docker image you downloaded is genuine, untampered, and officially released by Tuleap.

#How does Tuleap sign images?
They use a tool called cosign to digitally sign each official Docker image when publishing.

1. For Tuleap Community Edition Image:

--Download the public key file and save it as tuleap_docker.pub.
--Run this command to verify the image:

$ cosign verify -key tuleap_docker.pub tuleap/tuleap-community-edition:latest

--If the verification is successful, you’ll see output confirming:

=Signature and claims are valid

=Signature matches the public key

=Certificates are verified against trusted roots




2. For Tuleap Enterprise Edition Image:
Download the public key file and save it as tuleap_enterprise_docker.pub.
Run this command to verify the specific Enterprise image version:

$ cosign verify --key tuleap_enterprise_docker.pub docker.tuleap.org/tuleap-enterprise-edition:<tuleap_version>

--Success means:

Signature and claims are valid

Verified against transparency logs offline

Signature matches the public key





##process how to verify the tuleap image

🔐 What is cosign?
cosign is an open-source security tool developed by the Sigstore project. It is used to sign, verify, and store cryptographic signatures for container images and other artifacts. This helps ensure that the software you are using (like Docker images) is authentic, trusted, and untampered.

🛠️ How to Install cosign

1. Install Go (v1.22 or higher)

sudo apt install golang-go

2. Clone cosign repo
git clone https://github.com/sigstore/cosign
cd cosign

3. Install cosign
go install ./cmd/cosign
sudo cp $(go env GOPATH)/bin/cosign /usr/local/bin/
cosign version

eg:-
 /      | /  __  \      /       ||  |  /  _____||  \ |  |
|  ,----'|  |  |  |    |   (----`|  | |  |  __  |   \|  |
|  |     |  |  |  |     \   \    |  | |  | |_ | |  . `  |
|  `----.|  `--'  | .----)   |   |  | |  |__| | |  |\   |
 \______| \______/  |_______/    |__|  \______| |__| \__|
cosign: A tool for Container Signing, Verification and Storage in an OCI registry.

GitVersion:    devel
GitCommit:     56d51141bdcfddc45609f17c73fd90fc40e965f3
GitTreeState:  clean
BuildDate:     2025-05-12T16:39:08
GoVersion:     go1.24.3
Compiler:      gc
Platform:      linux/amd64



###🧪 How to Verify a Docker Image with cosign

✅ Step-by-Step: Verify Tuleap Community Image

1. Download the public key from Tuleap

https://docs.tuleap.org/_downloads/617a178cd6a793111374f5717f12032d/tuleap_docker.pub

2. pull latest tuleap image from docker hub

docker pull tuleap/tuleap-community-edition

3. Verify the image
cosign verify --key tuleap_docker.pub tuleap/tuleap-community-edition:latest


🔐 Summary of What You Did:
✔️ Verified the signature of the image: tuleap/tuleap-community-edition:latest

✔️ Used the official public key: tuleap_docker.pub

✔️ cosign confirmed:

Signature is valid

Claims were validated

Signature was logged in the transparency log

The manifest digest (sha256:...) matches the signed image



#note:-
Verifying the image ensures you are running a safe, official Tuleap Docker image, protecting you from tampered or fake images.






################################################### Docker Standalone #############################################################---------4

✅ What is Docker Standalone?

Docker Standalone means you run only the Tuleap container in Docker, while the other required services like MySQL and Redis are already set up externally — either on the host machine or on separate servers.

or
Running only one application container (like Tuleap) using docker run, while other services like MySQL and Redis are already set up and running externally, outside Docker.

#🔹 Key Points:

You manually start the container with environment variables and volume mounts.

External services like MySQL and Redis run outside the container, often on separate hosts or VMs.

You expose necessary ports (80, 443, 22) directly on the host.

Simpler for quick setups or small test environments.

You manage dependencies like DB and Redis yourself — they are not part of the container.

It's best for quick setups, custom production deployments, or when you manage databases yourself.



💡 Think of it like this:
Standalone = "Single app only in Docker"

Others (like DB/Redis) = Running outside of Docker (e.g., on your server/VM)


🔁 Comparison:

| Type               | What it includes                                     |
| ------------------ | ---------------------------------------------------- |
| **Standalone**     | Only Tuleap in Docker, other services run externally |
| **Docker Compose** | Tuleap + MySQL + Redis — all run in Docker together  |



⚖️ Differences and When to Use
| Feature               | Docker Standalone                            | Docker Compose                                  |
| --------------------- | -------------------------------------------- | ----------------------------------------------- |
| Number of containers  | Single container for Tuleap only             | Multiple containers (Tuleap + DB + Redis)       |
| Dependency management | External DB and Redis managed outside Docker | DB and Redis run as containers alongside Tuleap |
| Setup complexity      | Simple, command-line driven                  | More complex YAML config, but repeatable        |
| Scaling               | Manual scaling, external management          | Easier to scale or add services                 |
| Port mapping          | Manually exposed                             | Defined in YAML                                 |
| Volume management     | Manual volume mounts                         | Declared volumes for persistent data            |
| Use case              | Quick test or small deployment               | Development, testing, or production setups      |
| Lifecycle management  | Manual container start/stop                  | Single command to start/stop whole stack        |





######################################################## Docker Compose ############################################################-----------5


✅ What is Docker Compose?

Docker Compose is a tool for defining and managing multi-container Docker applications. It uses a YAML file to configure the application's services, networks, and volumes. With a single command, users can create and start all the services defined in the Compose file, simplifying the management of complex applications. Docker Compose is suitable for development, testing, and production environments. 

or

Docker Compose is a tool used to define and run multi-container Docker applications with a single file (compose.yaml).
In the context of Tuleap, Docker Compose helps you run:

--Containers (services)

--Networks

--Volumes

You can start all services with a single command:
👉 docker-compose up -d

--Makes it easy to run complex applications with multiple services.

--Suitable for development, testing, and light production environments.



🧠 When to use Docker Compose?

✅ You want to run multiple containers together (e.g., Tuleap + MySQL + Redis).

✅ You don’t already have external MySQL or Redis — Docker Compose will manage them for you.

✅ You need a self-contained, repeatable environment.

✅ You are setting up local development or testing environments.

✅ You want to start, stop, or rebuild all services easily with simple commands.

✅ You prefer clean separation of app configuration and infrastructure.

✅ You're not ready to set up external database servers or maintain them separately.

✅ You want an easy rollback option — just stop the stack and remove containers.




================================================================================================================================================
						         ***Production Setup***


##################################################### Tuleap Process step by step ###########################################################
                       
#The Environment
In both environments (production or test), you create:
1. .env → for config and secrets.
2. docker-compose.yaml → for Docker Compose service definitions.


#🟠 Directory Location Depends on the Purpose
Use Case	                            Suggested Path	                                    Reason
Production                                  /srv/tuleap/	                            srv is the standard Linux directory for service data. Keeps things clean and aligned with Linux Filesystem Hierarchy (FHS).

Testing / Demo	                       /home/$USER/Workspace/test-tuleap/	   User-space experiment; safer for development, easier to manage without root access.


#Note
Use /home/.(Safe, for practice)... for testing setups or when you're Experimenting, development, trying config or learning/debugging.

Use /srv/.(Standard, for services)... for actual, stable services that users rely on (even if internal/offline).clean, secure, and isolated.


📁 What is /srv used for?
-- /srv stands for "service".
-- It is to store data used by server applications, such as web servers (Apache, Nginx), FTP servers, and Docker-based services (like Tuleap).
-- /srv provides a clean, predictable location for service-specific files in a production environment.
-- Using /srv helps organize server data properly, keeping it separate from system files (/etc, /var, etc.) and user files (/home).


✅ Example Use Cases
Path	                            		Purpose
/srv/www/	                        	Web server content (Apache/Nginx)
/srv/ftp/	                        	FTP service data
/srv/tuleap/	                    		Data and configs for Tuleap containers
/srv/git/	                        	Self-hosted Git server repos


✅ 1. /srv/www/ – Web Server Content
Use Case: Hosting a website using Apache or Nginx.
-- Example: If you are running a company’s website, all the content, including HTML, images, and scripts, should be stored under /srv/www/ for easy management.
-- Path: /srv/www/yourwebsite/
-- Files inside: index.html, style.css, script.js, etc.
-- Service: Apache or Nginx reads from this directory to serve content to the browser.


✅ 2. /srv/ftp/ – FTP Service Data
Use Case: Managing file transfers using an FTP server.
-- Example: A company sets up an FTP server to allow internal teams to upload/download large files.
-- Path: /srv/ftp/
-- Files inside: uploads/, reports/, shared_docs/
-- Service: vsftpd or ProFTPD provides file transfer access to this directory.


✅ 3. /srv/tuleap/ – Tuleap Data & Configuration
Use Case: Running Tuleap in production using Docker containers.
-- Example: You want a stable, persistent Tuleap setup for your organization’s internal project management.
-- Path: /srv/tuleap/
-- Files inside: docker-compose.yaml, .env, data/, mysql_data/, redis_data/
-- Service: Docker containers for Tuleap read/write persistent data here for high availability.


✅ 4. /srv/git/ – Git Server Repositories
Use Case: Hosting your own Git server (e.g., GitLab).
-- Example: Your company hosts internal Git repositories to manage source code securely.
-- Path: /srv/git/
-- Files inside: project1.git/, project2.git/, etc. (each one is a bare Git repo)
-- Service: GitLab uses this directory to store and serve Git repositories to developers.



#🚀 Why use /srv/tuleap/ for Tuleap?
--Keeps production files organized and standardized.
--Makes it clear that the directory is part of a system service (not just a user experiment).
--Helps with automation, backup, and security policies.
--Easier to mount volumes or configure SELinux/AppArmor if needed.


🧱 Example Folder Structures

🧪 Test / Dev Setup:
/home/user/Workspace/test-tuleap/
├── .env
└── compose.yaml

--Runs under local user privileges.
--Great for quick testing or learning.
--No impact on system services.


🔐 Production Setup:
/srv/tuleap/
├── .env
└── compose.yaml

--May require sudo to run.
--Persistent, system-wide setup.
--Backups, security, and service monitoring expected





#.............................................................. TULEAP .....................................................................#      

			      ***Jenkins and Tuleap on two different servers Tuleap on Server 1 and Jenkins on Server 2***

#Server-1(Ubuntu-Machine)


1. Prepare the Environment
--Ensure you're working in a production environment with root privileges (via sudo).

--Choose the proper system location for the Tuleap setup:
--Path: /srv/tuleap/
--This ensures proper organization and security.


2. 📁 Folder Structure After Creating Tuleap Directory
/srv/
└── tuleap/
    ├── .env                   # Environment variables for Tuleap, MySQL, Redis
    └── docker-compose.yaml    # Docker Compose configuration for all services


$ sudo mkdir -p /srv/tuleap
$ cd /srv/tuleap
$ sudo nano .env          # Create and edit environment file
$ sudo nano docker-compose.yaml  # Create and edit Docker Compose config


3. Open Nano to Create the .env File
sudo nano .env


4. Paste the Following Content into (.env)

# Fully Qualified Domain Name (FQDN) of your Tuleap instance
TULEAP_FQDN="tuleap.isrd.cair.drdo"

# Hostname of the MySQL container (usually the container name)
TULEAP_SYS_DBHOST="db"

# Password for MySQL root user. Used during database initialization.
MYSQL_ROOT_PASSWORD="StrongRootPassword123"

# Tuleap application user database password
TULEAP_SYS_DBPASSWD="TuleapAppUserPass456"

# Default admin password for Tuleap web UI login (user: codendi-admin).
SITE_ADMINISTRATOR_PASSWORD="AdminPassword789"

# Email address used by Tuleap to send system emails(The "From" email address used for system notifications (e.g., password reset).)
TULEAP_SYS_EMAIL_ADMIN="tuleap-admin@isrd.cair.drdo.com"

# How Tuleap sends emails: sendmail (for Postfix on host) or smtp (for Gmail, etc).
TULEAP_EMAIL_TRANSPORT="sendmail"


#✅ These Redis-related variables are optional but are recommended in a production setup for improved performance, scalability, and session management reliability.

# Use Redis for storing PHP sessions (options: "redis" or leave blank for default file-based sessions)
TULEAP_FPM_SESSION_MODE="redis"

# Hostname of the Redis container. Usually redis
TULEAP_REDIS_SERVER="redis"

# Redis port (default is 6379)--Port Redis listens on.
TULEAP_REDIS_PORT="6379"

# Password to connect to Redis (if you set one).
TULEAP_REDIS_PASSWORD="RedisSecurePassword321"

# Use TLS for Redis? (1 = yes, 0 or leave blank = no)
TULEAP_REDIS_USE_TLS="0"






.....................................................................................................................................
✅⚠️ Important Password Notice – Production Use Only

🔐 All passwords defined in the .env file are applied only during the first container run.

🚫 Simply updating the .env file later will NOT change passwords in the running containers.
    - You must manually remove volumes and re-create containers to apply new passwords.

✅ Password Recommendations:
    - Minimum: 20 characters
    - Allowed: Only letters (A–Z, a–z) and numbers (0–9)
    - Avoid: Special characters (!@#$%^&*) — they may cause container errors

❗ These passwords control critical access:
    - MYSQL_ROOT_PASSWORD → full DB access
    - TULEAP_SYS_DBPASSWD → Tuleap access to database
    - SITE_ADMINISTRATOR_PASSWORD → Tuleap web admin login
    - REDIS_PASSWORD → Redis service authentication

📌 Example (Too weak – ❌):
    MYSQL_ROOT_PASSWORD="StrongRootPassword123"

📌 Example (Recommended – ✅):
    MYSQL_ROOT_PASSWORD="MySQLRootSecurePass9876543210"

🛡️ For production: Always use long, complex, and unique passwords. Protect your `.env` file with proper permissions.
......................................................................................................................................





5. Create compose.yaml for Tuleap (Production)
📁 Path:
/srv/tuleap/docker-compose.yaml

📌 Purpose:
Defines and configures three services: tuleap, mysql, and redis, using environment variables from .env.

📝 Command to Create the File
cd /srv/tuleap
sudo nano docker-compose.yaml


version: '3.8'

services:
  tuleap:
    image: tuleap/tuleap-community-edition:latest
    hostname: ${TULEAP_FQDN}
    container_name: tuleap
    restart: always
    ports:
      - "80:80"
      - "443:443"
      - "22:22"
    volumes:
      - tuleap-data:/data
    depends_on:
      - db
      - redis
    environment:
      - TULEAP_FQDN=${TULEAP_FQDN}
      - TULEAP_SYS_DBHOST=${TULEAP_SYS_DBHOST}
      - TULEAP_SYS_DBPASSWD=${TULEAP_SYS_DBPASSWD}
      - SITE_ADMINISTRATOR_PASSWORD=${SITE_ADMINISTRATOR_PASSWORD}
      - DB_ADMIN_USER=root
      - DB_ADMIN_PASSWORD=${MYSQL_ROOT_PASSWORD}
      - TULEAP_SYS_EMAIL_ADMIN=${TULEAP_SYS_EMAIL_ADMIN}
      - TULEAP_EMAIL_TRANSPORT=${TULEAP_EMAIL_TRANSPORT}
      - TULEAP_FPM_SESSION_MODE=${TULEAP_FPM_SESSION_MODE}
      - TULEAP_REDIS_SERVER=${TULEAP_REDIS_SERVER}
      - TULEAP_REDIS_PORT=${TULEAP_REDIS_PORT}
      - TULEAP_REDIS_PASSWORD=${TULEAP_REDIS_PASSWORD}
      - TULEAP_REDIS_USE_TLS=${TULEAP_REDIS_USE_TLS}
    networks:
      - shared-network

  db:
    image: mysql:8.0
    container_name: tuleap_db
    restart: always
    command: ["--character-set-server=utf8mb4", "--collation-server=utf8mb4_unicode_ci", "--sql-mode=NO_ENGINE_SUBSTITUTION"]
    environment:
      - MYSQL_ROOT_PASSWORD=${MYSQL_ROOT_PASSWORD}
    volumes:
      - db-data:/var/lib/mysql
    networks:
      - shared-network

  redis:
    image: redis:latest
    container_name: tuleap_redis
    restart: always
    command: redis-server --requirepass ${TULEAP_REDIS_PASSWORD}
    volumes:
      - redis-data:/data
    networks:
      - shared-network

volumes:
  tuleap-data:
  db-data:
  redis-data:

networks:
  shared-network:
    driver: bridge


#save and exit!


🔹 Start Tuleap in Detached Mode

$ docker-compose up -d


| Part             | Meaning                                                                                                       |
| ---------------- | ------------------------------------------------------------------------------------------------------------- |
| `docker-compose` | This is the **Docker Compose CLI tool** used to manage multi-container apps.                                  |
| `up`             | Tells Docker Compose to **start and create** all the services defined in the `docker-compose.yml` file.       |
| `-d`             | Means **detached mode** — runs containers in the **background**. You won’t see logs directly in the terminal. |


# Docker Compose commands
docker-compose up               # Start services (foreground)
docker-compose up -d            # Start services in background (detached mode)
docker-compose down             # Stop and remove containers, networks
docker-compose stop             # Stop containers (no removal)
docker-compose restart          # Restart all services
docker-compose ps               # List running containers and status
docker-compose logs             # Show logs for all services
docker-compose logs -f          # Follow logs live
docker-compose logs -f <service> # Follow logs for a specific service
docker-compose build            # Build or rebuild services
docker-compose exec <service> bash  # Open shell in running container
docker-compose down -v          # Stop and remove containers + volumes



# Update /etc/hosts to Map Hostname
$ sudo nano /etc/hosts

➡️ Add the line:
127.0.0.1	tuleap.isrd.cair.drdo   #local machine that tuleap.isrd.cair.drdo points to localhost (127.0.0.1)

✅ Way in Production (Multi-Server):
192.168.3.1	tuleap.isrd.cair.drdo


🔹 Monitor Logs

$ docker-compose logs -f tuleap
$ docker-compose logs
$ docker volume ls
$ docker network ls
$ docker network inspect <tuleap-setup_default>



#🔑Intial password for tuleap 
AdminPassword789

#Browser access
https://tuleap.isrd.cair.drdo/   

⚠️ Note: The browser may show “Not Secure” due to self-signed SSL certificates.





==================================================================================================================================================

#note:-1
if port 22 is already in use by another process (like your host's SSH server), Tuleap’s container cannot bind to the same port (22) on the host. Docker doesn’t allow multiple containers or services to bind to the same host port.

eg:-
ports:
  - "22:22"


ports:
  - "2222:22


2. point-2
docker-compose down
docker container prune -f
again reload image and up -d


3. up outgoing email (SMTP) so Tuleap can send emails and complete tasks like admin email confirmation, password resets, notifications, etc.,
--Manually update the admin email in Tuleap database

or use postfix
apt update
apt install mailutils



/////////////////////////////////////////////////// optional ////////////////////////////////////////////////////////////////////////////////////
#optional with mailhog 
version: '3.8'

services:
  tuleap:
    image: tuleap/tuleap-community-edition:latest
    hostname: ${TULEAP_FQDN}
    restart: always
    container_name: tuleap
    ports:
      - "80:80"
      - "443:443"
      - "22:22"
    volumes:
      - tuleap-data:/data
    depends_on:
      - db
      - redis
#      - mailhog
    environment:
      - TULEAP_FQDN=${TULEAP_FQDN}
      - TULEAP_SYS_DBHOST=db
      - TULEAP_SYS_DBPASSWD=${TULEAP_SYS_DBPASSWD}
      - SITE_ADMINISTRATOR_PASSWORD=${SITE_ADMINISTRATOR_PASSWORD}
      - DB_ADMIN_USER=root
      - DB_ADMIN_PASSWORD=${MYSQL_ROOT_PASSWORD}
      - TULEAP_REDIS_HOST=redis
      - TULEAP_REDIS_PASSWORD=${REDIS_PASSWORD}
      - MAILER_SMTP_HOST=mailhog
      - MAILER_SMTP_PORT=1025
      - MAILER_SMTP_USERNAME=${MAILER_SMTP_USERNAME}
      - MAILER_SMTP_MAILID=${MAILER_SMTP_MAILID}
      - MAILER_SMTP_PASSWORD=${MAILER_SMTP_PASSWORD}
      - MAILER_SMTP_TLS=${MAILER_SMTP_TLS}
    networks:
      - shared-network

  db:
    image: mysql:8.0
    command: ["--character-set-server=utf8mb4", "--collation-server=utf8mb4_unicode_ci", "--sql-mode=NO_ENGINE_SUBSTITUTION"]
    restart: always
    container_name: tuleap_db
    environment:
      - MYSQL_ROOT_PASSWORD=${MYSQL_ROOT_PASSWORD}
    volumes:
      - db-data:/var/lib/mysql
    networks:
      - shared-network

  redis:
    image: redis:latest
    restart: always
    container_name: tuleap_redis
    environment:
      - REDIS_PASSWORD=${REDIS_PASSWORD}
    volumes:
      - redis-data:/data
    networks:
      - shared-network

#  mailhog:
    image: mailhog/mailhog:latest
    restart: always
    container_name: tuleap_mailhog
    ports:
      - "1025:1025"
      - "8025:8025"
    environment:
      - MAILER_SMTP_HOST=mailhog
      - MAILER_SMTP_PORT=1025
    networks:
      - shared-network

volumes:
  tuleap-data:
  db-data:
  redis-data:

networks:
  shared-network:
    driver: bridge



#Theory
#Tuleap
1. bridge:
--Bridge Network: A virtual network that connects multiple containers, allowing them to communicate with each other.
--driver: bridge: Creates a virtual network bridge, allowing containers to communicate with each other.
--In Docker Compose, driver refers to the network driver that manages the network.
--shared-network is a more general term that refers to any network that is shared among multiple containers.


2. driver

In Docker, a "driver" refers to a built-in component that manages a specific aspect of containerization, such as:

- Network drivers (e.g., bridge, overlay)
- Volume drivers (e.g., local, nfs)


==================================================================================================================================================








































